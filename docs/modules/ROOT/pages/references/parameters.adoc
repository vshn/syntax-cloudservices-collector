= Parameters

Because this component depends on the component https://hub.syn.tools/appuio-cloud-reporting/references/parameters.html[appuio-cloud-reporting], some parameters are taken from that component and are not individually configurable in this component.
In particular:

* https://hub.syn.tools/appuio-cloud-reporting/references/parameters.html#_namespace[namespace]
* https://hub.syn.tools/appuio-cloud-reporting/references/parameters.html#_database[database]

The following list includes only parameters of this component.
The parent key for all of them is `metrics_collector`.

See xref:how-tos/installation.adoc[Installation] for a full example.

== `namespace`

[horizontal]
type:: string
default:: `${_instance}`

The namespace in which to deploy this component.

== `database`

[horizontal]
type:: dictionary
default::
+
[source,yaml]
----
host: null
port: 5432
name: appuio-cloud-reporting
username: appuio-cloud-reporting
password: null
parameters: ''
----

Dictionary managing the connection to the reporting database.

== `images`

[horizontal]
type:: dictionary
default:: https://github.com/vshn/billing-collector-cloudservices/blob/master/component/class/defaults.yml[See class/defaults.yml].

Dictionary containing the container images used by this component.

== `exoscale.enabled`

[horizontal]
type:: bool
default:: `false`

Set to true if you want to deploy the exosacle metrics collector components.

=== `exoscale.objectStorage.enabled`

[horizontal]
type:: bool
default:: `true`

Enable exoscale object storage cronjob.

=== `exoscale.objectStorage.schedule`

[horizontal]
type:: string
default:: `10 10,16,20 * * *`

The cron schedule at which the object storage metrics collection job is spawned.

=== `exoscale.dbaas.enabled`

[horizontal]
type:: bool
default:: `false`

Whether to add the DBaaS cronjob, too.

=== `exoscale.dbaas.schedule`

[horizontal]
type:: string
default:: `*/15 * * * *`

The cron schedule at which the DBaaS metrics collection job is spawned, if enabled.

=== `secrets.exoscale.credentials.stringData.EXOSCALE_API_KEY`

[horizontal]
type:: string
default:: Required.

The Exoscale API key.

You need to get the token from the https://portal.exoscale.com[Exoscale Console].
You need to select the correct account (token is limited to one account), choose "IAM" in the menu and generate a new key pair.

=== `secrets.exoscale.credentials.stringData.EXOSCALE_API_SECRET`

[horizontal]
type:: string
default:: Required.

The Exoscale API secret.

Second part of the Exoscale API credentials.
See EXOSCALE_API_KEY for instructions.

=== `secrets.exoscale.credentials.stringData.KUBERNETES_SERVER_URL`

[horizontal]
type:: string
default:: Required.

The Kubernetes server URL.

=== `secrets.exoscale.credentials.stringData.KUBERNETES_SERVER_TOKEN`

[horizontal]
type:: string
default:: Required.

The token to connect to a Kubernetes cluster.

The Service Account connected to this token should have `get` and `list` permissions to the following managed resources:

* `buckets.exoscale.crossplane.io`
* `postgresqls.exoscale.crossplane.io`

== `cloudscale.enabled`

[horizontal]
type:: bool
default:: `false`

Set to true if you want to deploy the cloudscale metrics collector components.

=== `cloudscale.objectStorage.enabled`

[horizontal]
type:: bool
default:: `true`

Enable cloudscale object storage cronjob.

=== `cloudscale.objectStorage.schedule`

[horizontal]
type:: string
default:: `10 4,10,16 * * *`

The cron schedule at which the object storage metrics collection job is spawned.

== `secrets.cloudscale.credentials.stringData.CLOUDSCALE_API_TOKEN`

[horizontal]
type:: string
default:: Required.

The cloudscale API token.

You need to get the token from the https://control.cloudscale.ch[Cloudscale Control Panel].
You need to select the correct Project (token is limited to one project), choose "API Tokens" in the menu and generate a new one.

== `secrets.cloudscale.credentials.stringData.KUBERNETES_SERVER_URL`

[horizontal]
type:: string
default:: Required.

The Kubernetes server URL.

== `secrets.cloudscale.credentials.stringData.KUBERNETES_SERVER_TOKEN`

[horizontal]
type:: string
default:: Required.

The token to connect to a Kubernetes cluster.

The Service Account connected to this token should have `get` and `list` permissions to `buckets.cloudscale.crossplane.io` managed resource, and `get` and `list` permissions for namespaces.
